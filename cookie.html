<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Nyan Cat Clicker</title>
    <link rel="icon" href="./assets/favicon.ico" />

    <!------STYLES CSS & FONTS------>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script>
      (function (d) {
        var config = {
          kitId: "ubh7uba",
          scriptTimeout: 3000,
          async: true,
        };
        var h = d.documentElement,
          t = setTimeout(function () {
            h.className =
              h.className.replace(/\bwf-loading\b/g, "") + " wf-inactive";
          }, config.scriptTimeout),
          tk = d.createElement("script"),
          f = false,
          s = d.getElementsByTagName("script")[0],
          a;
        h.className += " wf-loading";
        tk.src = "https://use.typekit.net/" + config.kitId + ".js";
        tk.async = true;
        tk.onload = tk.onreadystatechange = function () {
          a = this.readyState;
          if (f || (a && a != "complete" && a != "loaded")) return;
          f = true;
          clearTimeout(t);
          try {
            Typekit.load(config);
          } catch (e) {}
        };
        s.parentNode.insertBefore(tk, s);
      })(document);
    </script>
    <link rel="stylesheet" href="styles/cookie.css" />

    <!------SCRIPT JS------>
    <script src="scripts/cookie.js" defer></script>
    <script src="scripts/storage.js" defer></script>
    <script src="scripts/gifManager.js" defer></script>
    <script src="scripts/animations.js" defer></script>
    <script src="scripts/shop.js" defer></script>
    <script src="scripts/game.js" defer></script>
  </head>

  <body class="bg-gray-900 text-white touch-manipulation wf-loading">
    <div class="game-container">
      <div class="flex flex-col md:flex-row min-h-screen">
        <!-- Zone de jeu principale -->
        <main class="flex-1 p-4 md:w-3/4 md:max-w-3xl md:mx-auto">
          <h1 class="text-4xl font-bold mb-4">Nyan Cat Clicker</h1>

          <h2 class="text-3xl font-bold my-4 bg-dark-900 p-4">
            Croquettes : <span id="kibbleCount">0</span>
          </h2>

          <section class="gamedisplay my-8 mx-auto" id="kibble">
            <img
              class="nyancatgif cursor-pointer mx-auto select-none"
              src="assets/nyan-cat.gif"
              alt="Nyan Cat cliquable pour gagner des croquettes"
              draggable="false"
            />
          </section>
        </main>

        <!-- Bouton toggle mobile -->
        <button
          id="shopToggle"
          class="md:hidden fixed right-4 bottom-4 bg-purple-700 p-4 rounded-full z-50 shadow-lg"
        >
          üõçÔ∏è
        </button>

        <!-- Boutique c√¥t√© droit -->

        <aside
          id="shopPanel"
          class="fixed inset-y-0 right-0 w-72 bg-purple-900 p-6 transform translate-x-full md:translate-x-0 md:relative transition-transform duration-300 z-40 overflow-y-auto"
        >
          <h3 class="text-2xl font-bold mb-6 text-center">Boutique</h3>
          <p class="text-center text-sm mb-4 italic text-gray-300">
            D√©pense tes croquettes pour booster ta production !
          </p>

          <div class="space-y-4">
            <button
              id="autoClickerBtn"
              class="upgrade-btn w-full bg-cyan-600 hover:bg-cyan-700 active:bg-cyan-800 shadow-lg shadow-cyan-500/50 rounded-xl p-4 transition-all active:scale-[0.98]"
            >
              <div class="font-bold text-lg">üêæ AutoClicker</div>
              <div>Co√ªt : <span id="autoClickerCost">50</span> croquettes</div>
              <div>Quantit√© poss√©d√©e : <span id="autoClickers">0</span></div>
            </button>

            <button
              id="doubleClickerBtn"
              class="upgrade-btn w-full bg-cyan-600 hover:bg-cyan-700 active:bg-cyan-800 shadow-lg shadow-cyan-500/50 rounded-xl p-4 transition-all active:scale-[0.98]"
            >
              <div class="font-bold text-lg">‚ö° DoubleClicker</div>
              <div>
                Co√ªt : <span id="doubleClickerCost">100</span> croquettes
              </div>
              <div>
                Multiplicateur (x2 par clic) ‚Äî Poss√©d√© :
                <span id="doubleClicker">0</span>
              </div>
            </button>
          </div>

          <div class="upgrade-item mt-6">
            <button
              class="upgrade-btn bg-cyan-500 hover:bg-cyan-600 shadow-lg shadow-cyan-500/50 rounded-full p-3 w-full transition"
              onclick="buyMultiplier()"
            >
              <div class="font-bold text-lg">‚ú® Multiplicateur global</div>
              <div class="text-sm">Augmente toutes les croquettes g√©n√©r√©es</div>
              <div class="mt-1">
                Co√ªt : <span id="multiplierCost">200</span> croquettes
              </div>
              <div>Quantit√© : <span id="multipliers">0</span></div>
            </button>
          </div>

          <div class="upgrade-item mt-6">
            <h3 class="text-xl font-bold mb-4 text-center">
              Boutique de Skins
            </h3>
            <div id="kibbleShop" class="space-y-4">
              <!-- Les skins seront dynamiquement ajout√©s ici -->
            </div>
          </div>

          <button
            id="resetGameBtn"
            class="upgrade-btn w-full bg-red-600 hover:bg-red-700 active:bg-red-800 shadow-lg shadow-red-500/50 rounded-xl p-4 transition-all active:scale-[0.98]"
          >
            R√©initialiser la partie
          </button>
        </aside>
      </div>
    </div>

    <script>
      // Gestion du toggle boutique (mobile seulement)
      const shopToggle = document.getElementById("shopToggle");
      const shopPanel = document.getElementById("shopPanel");

      if (shopToggle && shopPanel) {
        shopToggle.addEventListener("click", () => {
          shopPanel.classList.toggle("translate-x-full");
        });
      }
    </script>
  </body>
</html>
